zabbix_export:
  version: "5.4"
  date: "2021-04-16T15:29:35Z"
  groups:
    - 
      name: Templates/Modules
  templates:
    - 
      template: Module Systemd Check
      name: Module Systemd Check
      groups:
        - 
          name: Templates/Modules
      discovery_rules:
        - 
          name: Systemd service discovery
          key: systemd.discovery
          delay: 3h
          item_prototypes:
            - name: Service {#UNIT.NAME} description {#UNIT.DESCRIPTION}
              key: systemd.status[{#UNIT.NAME}]
              description: |
                Description: {#UNIT.DESCRIPTION}
                Path: {#UNIT.PATH}
              delay: 10m
              history: 14d
              trends: 180d
              tags:
                -
                  tag: Application
                  value: Systemd
              trigger_prototypes:
                -
                  expression: 'last(/Module Systemd Check/systemd.status["{#UNIT.NAME}"])<>1'
                  name: 'Service {#UNIT.NAME} is not running!'
                  opdata: 'Service current state: {ITEM.LASTVALUE}'
                  priority: WARNING
                  description: |
                    Description: {#UNIT.DESCRIPTION}
      valuemaps:
        -
          uuid: 0af62e80c7284017912d353bf96bea1e
          name: 'Service state'
          mappings:
            -
              value: '0'
              newvalue: Down
            -
              value: '1'
              newvalue: Up